# 基本概念：程序、进程、线程

- **程序(program)**是为完成特定任务、用某种语言编写的一组指令的集合。即指**一段静态的代码**，静态对象。

- **进程(process)**是程序的一次执行过程，或是**正在运行的一个程序**。是一个动态的过程：有它自身的产生、存在和消亡的过程。——生命周期

  > 如：运行中的QQ，运行中的王者荣耀
>
  > 程序是静态的，进程是动态的
>
  > 进程作为资源分配的单位，系统在运行时会为每个进程分配不同的内存区域

- **线程(thread)**，进程可进一步细化为线程，是一个程序内部的一条执行路径。main方法就是一个线程。

  若一个进程同一时间**并行**执行多个线程，就是支持多线程的

  线程作为调度和执行的单位，每个线程拥有独立的运行栈和程序计数器(pc)，线程切换的开销小 

  一个进程中的多个线程共享相同的内存单元/内存地址空间它们从同一堆中分配对象，可以访问相同的变量和对象。这就使得线程间通信更简便、高效。但多个线程操作共享的系统资源可能就会带来安全的隐患。

**单核CPU和多核CPU**

- 一个Java应用程序java.exe，其实至少有三个线程：main()主线程，gc()垃圾回收线程，异常处理线程。当然如果发生异常，会影响主线程。

**并行与并发**

- **并行：**多个CPU同时执行多个任务。比如：多个人同时做不同的事。 就像多个车道的车一样。

- **并发：**一个CPU(采用时间片)同时执行多个任务。比如：秒杀车票、多个人做同一件事。

**使用多线程的优点**

1. 提高应用程序的响应。对图形化界面更有意义，可增强用户体验，做很多想做的事。

2. 提高CPU的利用率。

3. 改善程序结构。将既长又复杂的进程分为多个线程，独立运行，利于理解和修改。

**何时需要多线程**

- 打开美团外卖，想吃东西，手滑手机，如果没有多线程，下面刷新的速度会很卡。

# 线程的创建和启动

```java
public class Sample {
public void method1(String str) {
System.out.println(str);
}
public void method2(String str) {
method1(str);
}
public static void main(String[] args) {
Sample s = new Sample();
s.method2("hello!");
} }
```

上面这个程序就不是多线程的。从main开始，一条线就能走完。



- Java语言的JVM允许程序运行多个线程，它通过**java.lang.Thread**类来体现。 

- Thread类的特性

  每个线程都是通过某个特定Thread对象的run()方法来完成操作的，经常把run()方法的主体称为**线程体**

  通过该Thread对象的start()方法来启动这个线程，而非直接调用run()

**Thread类**

**API中创建线程的两种方式**

方式一：**继承Thread类**

1) 定义子类继承Thread类。

2) 子类中重写Thread类中的run方法。-->将此线程执行的操作声明在run方法中

3) 创建Thread子类对象，即创建了线程对象。

4) 调用线程对象start方法：启动线程，调用run方法。

